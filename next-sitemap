const { database } = require('./firebase'); // Import your Firebase setup
const { collection, getDocs } = require('firebase/firestore');

module.exports = {
  siteUrl: 'https://www.amplifyghana.com/', // Replace with your domain
  generateRobotsTxt: true, // (Optional) Generate robots.txt for search engines
  sitemapSize: 7000, // Optional: splits sitemap into multiple files if too large
  exclude: [
    '/cjuyu579ugnwh45h9mnhkulpnkzx6vwr0bni5pg3qsd9i0nh804w5gors9ihnyl8g4pa230uleij16ktraamuwi517', 
    '/t2nrkxgof25hi3as46h5mgen5cjd7hdnxxogi943hg1hm9j1sdft68eskyiwfe0siz96cuiu7yn7dfn9c7stz01hvi'
  ], // Exclude any URLs you don't want crawled
  additionalPaths: async (config) => {
    // Fetch the articles dynamically
    const articlesSnapshot = await getDocs(collection(database, 'articles')); // Change 'articles' to your collection name if needed
    const articles = articlesSnapshot.docs.map(doc => doc.data());
    
    // Return the list of articles in the correct format for your URL structure
    return articles.map(article => ({
      loc: `https://www.amplifyghana.com/${article.category}/${article.id}`, // Adjusted for category and articleId
      lastmod: article.updatedAt, // Optional: Add last modification date
    }));
  },
};
